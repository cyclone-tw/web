<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>åœ‹å§“åœ‹å°è³‡æºç­ä»£èª²äº‹é …ç”Ÿæˆå™¨</title>
    <style>
        /* --- åŸºç¤æš—è‰²ç³»æ¨£å¼ --- */
        :root {
            --color-bg: #1f2125;
            --color-text: #e0e0e0;
            --color-primary: #4CAF50; /* ç¶ è‰² */
            --color-secondary: #33363b; /* å¡ç‰‡/è¼¸å…¥æ¡†èƒŒæ™¯ */
            --color-border: #444;
            --color-hover: #45a049;
            --color-memo: #2a2d30; /* å‚™å¿˜éŒ„èƒŒæ™¯ */
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background-color: var(--color-bg);
            color: var(--color-text);
            margin: 0;
            padding: 25px;
            line-height: 1.6;
        }

        h1, h2, h3 {
            color: var(--color-primary);
            border-bottom: 1px solid var(--color-border);
            padding-bottom: 8px;
        }

        /* --- 1. è¨­ç½®å€åŸŸ --- */
        .setup-controls {
            background-color: var(--color-secondary);
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
            display: flex;
            gap: 20px;
            align-items: center;
        }

        .setup-controls label {
            font-weight: bold;
            margin-right: 5px;
        }

        input[type="date"] {
            background-color: #2a2d30;
            color: var(--color-text);
            border: 1px solid var(--color-border);
            padding: 8px;
            border-radius: 5px;
            font-family: inherit;
        }

        /* --- æŒ‰éˆ•æ¨£å¼ --- */
        .btn {
            background-color: var(--color-primary);
            color: #111;
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: background-color 0.2s;
        }

        .btn:hover {
            background-color: var(--color-hover);
        }

        .btn-print {
            background-color: #0277bd; /* è—è‰² */
            color: #fff;
        }
        .btn-print:hover {
            background-color: #039be5;
        }

        /* --- 2. å…§å®¹è¼¸å‡ºå€åŸŸæ¨£å¼ --- */
        #checklist-container {
            border: 1px dashed var(--color-border);
            padding: 15px;
            border-radius: 8px;
            min-height: 200px;
            margin-top: 20px;
        }

        .period-block {
            background-color: var(--color-secondary);
            border-left: 5px solid var(--color-primary);
            padding: 15px 20px;
            margin-bottom: 25px;
            border-radius: 0 8px 8px 0;
        }

        .period-block h3 {
            margin-top: 0;
            color: #fff;
            border-bottom: 1px solid #555;
            padding-bottom: 5px;
        }

        /* äº¤è¾¦äº‹é …å€åŸŸ */
        .task-input {
            background-color: var(--color-memo);
            min-height: 100px; /* çµ¦äºˆè¶³å¤ çš„ç·¨è¼¯ç©ºé–“ */
            padding: 10px;
            border-radius: 5px;
            border: 1px solid var(--color-border);
            outline: none;
            margin-top: 10px;
            margin-bottom: 15px;
        }

        .task-input:empty::before {
            content: "è«‹é»æ­¤è¼¸å…¥äº¤è¾¦äº‹é …ï¼Œå¯è¼¸å…¥å¤šè¡Œï¼Œä¸¦æŒ‰ Shift+Enter æ›è¡Œã€‚";
            color: #888;
            font-style: italic;
        }

        /* å‚™å¿˜éŒ„å€åŸŸ */
        .memo-label {
            font-weight: bold;
            color: #ccc;
            display: block;
            margin-bottom: 5px;
        }
        
        .memo-space {
            background-color: var(--color-memo);
            min-height: 80px; /* çµ¦ä»£èª²è€å¸«ç•™ç™½çš„ç©ºé–“ */
            padding: 10px;
            border-radius: 5px;
            border: 1px dashed #777; /* è™›ç·šé‚Šæ¡†ï¼Œæ›´åƒç­†è¨˜æœ¬ */
            outline: none;
        }
        
        .memo-space:empty::before {
             content: " (ä»£èª²è€å¸«å‚™å¿˜éŒ„ç©ºé–“)";
            color: #888;
            font-style: italic;
        }

        /* ç°½åæ¬„ä½ */
        .signature-area {
            display: flex;
            justify-content: flex-end;
            margin-top: 50px;
            padding: 20px 0;
        }

        .signature-area p {
            font-size: 1.1em;
            font-weight: bold;
            color: #ccc;
        }

        /* --- 3. åˆ—å°æ¨£å¼ (é—œéµ) --- */
        @media print {
            body {
                background-color: #fff; 
                color: #000; 
                padding: 15px; /* ç•™å‡º A4 é‚Šè· */
            }

            .setup-controls, .btn, .btn-print {
                display: none; /* åˆ—å°æ™‚éš±è—æ§åˆ¶å…ƒä»¶ */
            }

            #checklist-container {
                border: none; /* åˆ—å°æ™‚éš±è—å¤–è™›ç·š */
                padding: 0;
            }

            h1, h2, h3 {
                color: #000;
                border-bottom: 1px solid #ccc;
            }

            .period-block {
                background-color: #fff; /* åˆ—å°æ™‚å¼·åˆ¶ç™½åº• */
                border-left: 5px solid #aaa;
                color: #000;
                page-break-inside: avoid; 
            }

            /* æ¸…ç©ºèƒŒæ™¯ï¼Œç¢ºä¿åˆ—å°æ¸…æ™° */
            .task-input, .memo-space {
                background-color: #fff;
                border: 1px solid #000; /* åˆ—å°æ™‚ä½¿ç”¨é»‘è‰²é‚Šæ¡† */
                color: #000;
                min-height: 80px; /* ç¢ºä¿ç•™ç™½ç©ºé–“è¢«ä¿ç•™ */
                box-shadow: none;
            }
            .memo-space {
                border: 1px dashed #000; /* å‚™å¿˜éŒ„ä½¿ç”¨é»‘è‰²è™›ç·š */
            }

            /* ç¢ºä¿ contenteditable çš„ placeholder ä¸æœƒè¢«å°å‡ºä¾† */
            .task-input:empty::before, .memo-space:empty::before {
                content: " "; /* åˆ—å°æ™‚éš±è—æç¤ºæ–‡å­— */
                color: #000;
            }

            .signature-area p {
                color: #000;
                border-top: 1px solid #000; /* ç°½ååº•ç·š */
                padding-top: 5px;
            }
        }
    </style>
</head>
<body>


    <!-- 1. è¨­ç½®å€åŸŸ -->
    <div class="setup-controls">
        <label for="trip-date">è«‹é¸æ“‡å‡ºå·®æ—¥æœŸï¼š</label>
        <input type="date" id="trip-date">
        <button class="btn" id="generateBtn">1. å¸¶å…¥ç•¶æ—¥èª²è¡¨</button>
        <button class="btn btn-print" id="printBtn" style="margin-left: auto;">2. ç”¢ç”ŸPDF/åˆ—å°</button>
    </div>

    <!-- 2. å…§å®¹è¼¸å‡ºå€åŸŸ -->
    <div id="checklist-container">
        <p>è«‹å…ˆé¸æ“‡æ—¥æœŸï¼Œç„¶å¾Œé»æ“Š "å¸¶å…¥ç•¶æ—¥èª²è¡¨"ã€‚æ‚¨å¯ä»¥åœ¨ç”Ÿæˆçš„å€å¡Šå…§ç›´æ¥è¼¸å…¥äº¤è¾¦äº‹é …èˆ‡å‚™è¨»ã€‚</p>
    </div>

    <script>
        // --- JavaScript é‚è¼¯ ---

        /**
         * 1. æ‚¨çš„æ¯é€±èª²è¡¨ (æ ¸å¿ƒæ•¸æ“š)
         * è«‹åœ¨æ­¤ä¿®æ”¹æˆæ‚¨è‡ªå·±çš„èª²è¡¨
         * 0=æ˜ŸæœŸæ—¥, 1=æ˜ŸæœŸä¸€, 2=æ˜ŸæœŸäºŒ, ... 6=æ˜ŸæœŸå…­
         */
        const weeklySchedule = {
            // æ˜ŸæœŸä¸€
            1: [
                { period: "æ—©è‡ªç¿’", time: "07:50-08:30", subject: "ç‰¹ç”ŸA", class: "è³‡æºç­" },
                { period: "ç¬¬ä¸€ç¯€", time: "08:40-09:20", subject: "4Aæ•¸å­¸", class: "è³‡æºç­" },
                { period: "ç¬¬äºŒç¯€", time: "09:30-10:10", subject: "3Aæ•¸å­¸", class: "è³‡æºç­" },
                { period: "ç¬¬å››ç¯€", time: "11:20-12:00", subject: "5Aæ•¸å­¸", class: "è³‡æºç­" },
            ],
            // æ˜ŸæœŸäºŒ
            2: [                
                { period: "ç¬¬ä¸€ç¯€", time: "08:40-09:20", subject: "4Aæ•¸å­¸", class: "è³‡æºç­" },
                { period: "ç¬¬äºŒç¯€", time: "09:30-10:10", subject: "3Aæ•¸å­¸", class: "è³‡æºç­" },
                { period: "ç¬¬å››ç¯€", time: "11:20-12:00", subject: "5Aæ•¸å­¸", class: "è³‡æºç­" },
            ],
            // æ˜ŸæœŸä¸‰
            3: [
                { period: "æ—©è‡ªç¿’", time: "07:50-08:30", subject: "ç‰¹ç”ŸA", class: "è³‡æºç­" },
                { period: "ç¬¬ä¸€ç¯€", time: "08:40-09:20", subject: "5Aæ•¸å­¸", class: "è³‡æºç­" },
                { period: "ç¬¬äºŒç¯€", time: "09:30-10:10", subject: "3Aæ•¸å­¸", class: "è³‡æºç­" },
                { period: "ç¬¬å››ç¯€", time: "11:20-12:00", subject: "4Aæ•¸å­¸", class: "è³‡æºç­" },
            ],
            // æ˜ŸæœŸå››
            4:[
                { period: "æ—©è‡ªç¿’", time: "07:50-08:30", subject: "ç‰¹ç”ŸA", class: "è³‡æºç­" },
                { period: "ç¬¬ä¸€ç¯€", time: "08:40-09:20", subject: "4Aæ•¸å­¸", class: "è³‡æºç­" },
                { period: "ç¬¬ä¸‰ç¯€", time: "10:30-11:10", subject: "3Aæ•¸å­¸", class: "è³‡æºç­" },
                { period: "ç¬¬å››ç¯€", time: "11:20-12:00", subject: "5Aæ•¸å­¸", class: "è³‡æºç­" },
            ],
            // æ˜ŸæœŸäº”
            5: [
                { period: "æ—©è‡ªç¿’", time: "07:30-08:00", subject: "å°å¸«æ™‚é–“", class: "ä¸‰å¹´ä¸€ç­" },
                { period: "ç¬¬ä¸€ç¯€", time: "08:10-08:50", subject: "åœ‹æ–‡", class: "ä¸‰å¹´äºŒç­" },
                { period: "ç¬¬äºŒç¯€", time: "09:00-09:40", subject: "ç©ºå ‚", class: "æ•™å¸«å®¤" },
                { period: "ç¬¬ä¸‰ç¯€", time: "10:00-10:40", subject: "åœ‹æ–‡", class: "ä¸‰å¹´ä¸€ç­" },
                { period: "ç¬¬å››ç¯€", time: "11:00-11:40", subject: "ç©ºå ‚", class: "æ•™å¸«å®¤" },
                { period: "åˆä¼‘", time: "12:00-12:30", subject: "å°å¸«æ™‚é–“", class: "ä¸‰å¹´ä¸€ç­" }
            ],
            // é€±æœ« (ç•™ç©º)
            0: [],
            6: []
        };
        const weekDayMap = ["æ˜ŸæœŸæ—¥", "æ˜ŸæœŸä¸€", "æ˜ŸæœŸäºŒ", "æ˜ŸæœŸä¸‰", "æ˜ŸæœŸå››", "æ˜ŸæœŸäº”", "æ˜ŸæœŸå…­"];

        // --- 2. ç²å–å…ƒç´  ---
        const generateBtn = document.getElementById('generateBtn');
        const printBtn = document.getElementById('printBtn');
        const dateInput = document.getElementById('trip-date');
        const container = document.getElementById('checklist-container');

        // --- 3. æ ¸å¿ƒåŠŸèƒ½ï¼šç”Ÿæˆèª²è¡¨å€å¡Š ---
        generateBtn.onclick = function() {
            const selectedDate = dateInput.value;
            if (!selectedDate) {
                console.error("æœªé¸æ“‡æ—¥æœŸã€‚");
                // ä½¿ç”¨ console.error å–ä»£ alert()
                container.innerHTML = `<p style="color:red;">éŒ¯èª¤ï¼šè«‹å…ˆé¸æ“‡ä¸€å€‹æ—¥æœŸï¼</p>`;
                return;
            }

            const dateObj = new Date(selectedDate.replace(/-/g, '/')); // ç¢ºä¿æ—¥æœŸæ ¼å¼æ­£ç¢º
            const dayOfWeek = dateObj.getDay();
            const scheduleForDay = weeklySchedule[dayOfWeek];
            
            const dateString = dateObj.toLocaleDateString('zh-TW', { year: 'numeric', month: 'long', day: 'numeric' });
            
            // æ¸…ç©ºå®¹å™¨ï¼Œé–‹å§‹ç”Ÿæˆå…§å®¹
            container.innerHTML = '';

            // æ¨™é¡Œ
            const title = document.createElement('h2');
            title.textContent = `${dateString} (${weekDayMap[dayOfWeek]}) - ä»£èª²äº‹é …æ¸…å–®`;
            container.appendChild(title);

            // æª¢æŸ¥æ˜¯å¦æœ‰èª²
            if (!scheduleForDay || scheduleForDay.length === 0) {
                const noClass = document.createElement('p');
                noClass.textContent = "ç•¶å¤©ç‚ºé€±æœ«æˆ–èª²è¡¨ç„¡è³‡æ–™ï¼Œè«‹ç¢ºèªã€‚";
                container.appendChild(noClass);
                
                // ä»é¡¯ç¤ºç°½åæ¬„ä½
                addSignatureArea(); 
                return;
            }

            // éæ­·èª²è¡¨ï¼Œç”Ÿæˆè¼¸å…¥å€å¡Š
            scheduleForDay.forEach((period, index) => {
                const block = document.createElement('div');
                block.className = 'period-block';

                // æ¨™é¡Œ (e.g., 08:10-08:50 | ç¬¬ä¸€ç¯€ | åœ‹æ–‡ (ä¸‰å¹´ä¸€ç­))
                const periodTitle = document.createElement('h3');
                periodTitle.textContent = `${period.time} | ${period.period} | ${period.subject} (${period.class})`;
                
                // 1. äº¤è¾¦äº‹é …è¼¸å…¥å€å¡Š (å¯è¼¸å…¥å¤šè¡Œã€å¯å«checkbox)
                const taskInput = document.createElement('div');
                taskInput.className = 'task-input';
                taskInput.contentEditable = true; 
                taskInput.innerHTML = `
                    <ul style="list-style: none; padding: 0;">
                        <li style="margin-bottom: 5px;"><input type="checkbox"> </li>
                        <li style="margin-bottom: 5px;"><input type="checkbox"> </li>
						<li style="margin-bottom: 5px;"><input type="checkbox"> </li>
	                </ul>
                `; // é è¨­æä¾›å…©å€‹ç¯„ä¾‹ checkbox

                // 2. ä»£èª²è€å¸«å‚™å¿˜éŒ„å€å¡Š
                const memoLabel = document.createElement('span');
                memoLabel.className = 'memo-label';
                memoLabel.textContent = "ğŸ“ ä»£èª²è€å¸«å‚™å¿˜éŒ„ / èª²å ‚ç´€éŒ„ï¼š";

                const memoSpace = document.createElement('div');
                memoSpace.className = 'memo-space';
                memoSpace.contentEditable = true; 

                // çµ„åˆå€å¡Š
                block.appendChild(periodTitle);
                block.appendChild(taskInput);
                block.appendChild(memoLabel);
                block.appendChild(memoSpace);
                container.appendChild(block);
            });

            // 3. ç°½åæ¬„ä½
            addSignatureArea();
        };

        /**
         * æ–°å¢ç°½åæ¬„ä½åˆ°å®¹å™¨åº•éƒ¨
         */
        function addSignatureArea() {
             const sigArea = document.createElement('div');
            sigArea.className = 'signature-area';
            sigArea.innerHTML = '<p>æ•™å¸«ç°½å: <span style="display: inline-block; width: 250px; border-bottom: 1px solid var(--color-text);"></span></p>';
            container.appendChild(sigArea);
        }


        // --- 4. ç¶å®šã€Œåˆ—å°ã€æŒ‰éˆ•äº‹ä»¶ ---
        printBtn.onclick = function() {
            // æé†’ä½¿ç”¨è€…å¦‚ä½•è™•ç†Wordæª”
            console.info("å¦‚æœè¦è¼¸å‡º Word æª”æ¡ˆï¼Œè«‹æ‰‹å‹•è¤‡è£½å…§å®¹è²¼ä¸Šã€‚");
            // è§¸ç™¼ç€è¦½å™¨çš„åˆ—å°åŠŸèƒ½ (ç”¨æ–¼ç”¢ç”Ÿ PDF)
            window.print();
        };

        // åˆå§‹åŒ–æ™‚è‡ªå‹•ç”Ÿæˆä»Šå¤©çš„èª²è¡¨ (å¯é¸)
        document.addEventListener('DOMContentLoaded', () => {
            const today = new Date();
            const year = today.getFullYear();
            const month = String(today.getMonth() + 1).padStart(2, '0');
            const day = String(today.getDate()).padStart(2, '0');
            dateInput.value = `${year}-${month}-${day}`;
            // generateBtn.click(); // å¯é¸ï¼šä¸€è¼‰å…¥å°±è‡ªå‹•ç”Ÿæˆä»Šæ—¥èª²è¡¨
        });
    </script>
</body>
</html>